{% from "components/big-number.html" import big_number %}
{% from "components/message-count-label.html" import message_count_label %}
{% from "components/table.html" import list_table, field, hidden_field_heading, row_heading, text_field, spark_bar_field %}
{% from "components/report-nav.html" import report_nav %}

{% extends "withnav_template.html" %}

{% block service_page_title %}
  Reports
{% endblock %}

{% block maincolumn_content %}

    {% include 'views/reports/_heading.html' %}

    {{ report_nav(selected, current_service=current_service) }}

    {% include 'views/reports/_date-range.html' %}

    {% include 'views/reports/_download.html' %}

    <div class='dashboard-table'>
      {% call(item, row_number) list_table(
        [
          {'id': 'foo', 'name': 'Blackpool', 'type': 'sms', 'requested_count': 320, 'failure_rate': 2},
          {'id': 'foo', 'name': 'Southport', 'type': 'sms', 'requested_count': 190, 'failure_rate': 4},
          {'id': 'foo', 'name': 'Preston', 'type': 'sms', 'requested_count': 254, 'failure_rate': 5},
          {'id': 'foo', 'name': 'Morecambe', 'type': 'sms', 'requested_count': 106, 'failure_rate': 1},
        ],
        caption='foo',
        caption_visible=False,
        empty_message='',
        field_headings=[
          'Template',
          'Messages sent'
        ],
        field_headings_visible=False
      ) %}
        {% call row_heading() %}
          <a class="file-list-filename" href="#">{{ item.name }}</a>
        {% endcall %}
        {{ spark_bar_field(item.requested_count, 321, failure_rate=item.failure_rate) }}
      {% endcall %}
    </div>

{% endblock %}
